[gd_scene load_steps=53 format=3 uid="uid://bniqo01iabb12"]

[ext_resource type="PackedScene" uid="uid://cadwe7xmpwmnq" path="res://game/weapon/weapon_root.tscn" id="1_18nrt"]
[ext_resource type="PackedScene" uid="uid://cdou8vt06ok1y" path="res://game/mob/bullet/small_bullet_1.tscn" id="2_jnrqm"]
[ext_resource type="Texture2D" uid="uid://budnihue7o6yt" path="res://game/contents/image/weapon/default_gun.png" id="2_pmspy"]
[ext_resource type="Animation" uid="uid://ewv6bfkr0wpm" path="res://game/contents/state_machine/weapon/broken.tres" id="4_jfbfv"]
[ext_resource type="Animation" uid="uid://c4i4h4s5l4pxu" path="res://game/contents/state_machine/weapon/empty.tres" id="5_cqosd"]
[ext_resource type="Animation" uid="uid://dsyq75fp8nl24" path="res://game/contents/state_machine/weapon/equip.tres" id="5_u4x6j"]
[ext_resource type="Animation" uid="uid://drlw0ppky2k28" path="res://game/contents/state_machine/weapon/idle.tres" id="6_cqosd"]
[ext_resource type="Animation" uid="uid://b50gnru2tsie3" path="res://game/contents/state_machine/weapon/initialize.tres" id="7_4otrs"]
[ext_resource type="Animation" uid="uid://dh22vhxeq1oxb" path="res://game/contents/state_machine/weapon/item.tres" id="8_t0sgr"]
[ext_resource type="Animation" uid="uid://ww7f1i78ij12" path="res://game/contents/state_machine/weapon/sleep.tres" id="10_4r53s"]
[ext_resource type="Animation" uid="uid://camfd07a5xaye" path="res://game/contents/state_machine/weapon/separate.tres" id="10_bjf0l"]
[ext_resource type="Animation" uid="uid://cpti2lg0reo88" path="res://game/contents/state_machine/weapon/terminate.tres" id="11_b7dj7"]
[ext_resource type="Animation" uid="uid://d3isqfmn11pi4" path="res://game/contents/state_machine/weapon/trash.tres" id="12_vdrtg"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_h3gra"]
size = Vector2(40, 16)

[sub_resource type="Animation" id="Animation_nyqnr"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath(".:collision_layer")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:self_modulate")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 1)]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Sprite2D:offset")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [Vector2(0, 0)]
}

[sub_resource type="Animation" id="Animation_hpp5l"]
resource_name = "default"
length = 0.2
loop_mode = 1
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [1, 0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:offset")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.02),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [Vector2(-5, 0), Vector2(0, 0)]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"Fire"
}]
}
tracks/3/type = "method"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath(".")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": ["gun_shot"],
"method": &"PlaySe"
}]
}

[sub_resource type="Animation" id="Animation_di3q0"]
length = 0.5
loop_mode = 1
step = 0.01
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [1, 0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Sprite2D:offset")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.02),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [Vector2(-5, 0), Vector2(0, 0)]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath(".")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"Fire"
}]
}
tracks/3/type = "method"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath(".")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"values": [{
"args": ["gun_shot"],
"method": &"PlaySe"
}]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_4j6vm"]
_data = {
&"RESET": SubResource("Animation_nyqnr"),
&"attack": SubResource("Animation_hpp5l"),
&"broken": ExtResource("4_jfbfv"),
&"empty": ExtResource("5_cqosd"),
&"enemy_attack": SubResource("Animation_di3q0"),
&"equip": ExtResource("5_u4x6j"),
&"idle": ExtResource("6_cqosd"),
&"initialize": ExtResource("7_4otrs"),
&"item": ExtResource("8_t0sgr"),
&"separate": ExtResource("10_bjf0l"),
&"sleep": ExtResource("10_4r53s"),
&"terminate": ExtResource("11_b7dj7"),
&"trash": ExtResource("12_vdrtg")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vsv2k"]
animation = &"attack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vkhfu"]
animation = &"broken"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_0e4go"]
animation = &"empty"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_i8nfq"]
animation = &"enemy_attack"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ut2ec"]
animation = &"broken"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_j078m"]
animation = &"empty"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qjttx"]
animation = &"equip"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_u3bik"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_46xmx"]
animation = &"equip"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_01ycp"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_q2vig"]
animation = &"initialize"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_67h6y"]
animation = &"item"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7ommn"]
animation = &"separate"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_djmw2"]
animation = &"sleep"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5brmv"]
animation = &"terminate"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_bh5ki"]
animation = &"trash"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7f0kr"]
advance_mode = 2
advance_condition = &"press"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5uo8n"]
advance_mode = 2
advance_condition = &"release"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_so7hh"]
advance_mode = 2
advance_condition = &"empty"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_nbo1b"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_341va"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_jea1f"]
advance_mode = 2
advance_condition = &"empty"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5jyn2"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pgxx2"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_i7846"]
switch_mode = 2
advance_mode = 2
advance_condition = &"empty"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_o52n0"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_t2k6i"]
advance_mode = 2
advance_condition = &"press"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_uh4fw"]
advance_mode = 2
advance_condition = &"empty"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1yftj"]
advance_mode = 2
advance_condition = &"empty"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pbrf8"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_0toqd"]
advance_mode = 2
advance_condition = &"release"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7ih00"]
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_pjol2"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_h7hrb"]
states/End/position = Vector2(-353, 4)
states/Start/position = Vector2(-353, -211)
states/attack/node = SubResource("AnimationNodeAnimation_vsv2k")
states/attack/position = Vector2(149, 4)
states/broken/node = SubResource("AnimationNodeAnimation_vkhfu")
states/broken/position = Vector2(359, -105)
states/empty/node = SubResource("AnimationNodeAnimation_0e4go")
states/empty/position = Vector2(359, 4)
states/enemy_attack/node = SubResource("AnimationNodeAnimation_i8nfq")
states/enemy_attack/position = Vector2(518.627, 4)
states/enemy_broken/node = SubResource("AnimationNodeAnimation_ut2ec")
states/enemy_broken/position = Vector2(733.627, -105)
states/enemy_empty/node = SubResource("AnimationNodeAnimation_j078m")
states/enemy_empty/position = Vector2(733.627, 4)
states/enemy_equip/node = SubResource("AnimationNodeAnimation_qjttx")
states/enemy_equip/position = Vector2(518.627, -211)
states/enemy_idle/node = SubResource("AnimationNodeAnimation_u3bik")
states/enemy_idle/position = Vector2(518.627, -105)
states/equip/node = SubResource("AnimationNodeAnimation_46xmx")
states/equip/position = Vector2(149, -211)
states/idle/node = SubResource("AnimationNodeAnimation_01ycp")
states/idle/position = Vector2(149, -105)
states/initialize/node = SubResource("AnimationNodeAnimation_q2vig")
states/initialize/position = Vector2(-222, -211)
states/item/node = SubResource("AnimationNodeAnimation_67h6y")
states/item/position = Vector2(-222, 4)
states/separate/node = SubResource("AnimationNodeAnimation_7ommn")
states/separate/position = Vector2(14, -211)
states/sleep/node = SubResource("AnimationNodeAnimation_djmw2")
states/sleep/position = Vector2(-353, -105)
states/terminate/node = SubResource("AnimationNodeAnimation_5brmv")
states/terminate/position = Vector2(14, -105)
states/trash/node = SubResource("AnimationNodeAnimation_bh5ki")
states/trash/position = Vector2(-113, 4)
transitions = ["idle", "attack", SubResource("AnimationNodeStateMachineTransition_7f0kr"), "attack", "idle", SubResource("AnimationNodeStateMachineTransition_5uo8n"), "attack", "empty", SubResource("AnimationNodeStateMachineTransition_so7hh"), "equip", "idle", SubResource("AnimationNodeStateMachineTransition_nbo1b"), "empty", "broken", SubResource("AnimationNodeStateMachineTransition_341va"), "equip", "broken", SubResource("AnimationNodeStateMachineTransition_jea1f"), "separate", "terminate", SubResource("AnimationNodeStateMachineTransition_5jyn2"), "initialize", "item", SubResource("AnimationNodeStateMachineTransition_pgxx2"), "initialize", "trash", SubResource("AnimationNodeStateMachineTransition_i7846"), "enemy_equip", "enemy_idle", SubResource("AnimationNodeStateMachineTransition_o52n0"), "enemy_idle", "enemy_attack", SubResource("AnimationNodeStateMachineTransition_t2k6i"), "enemy_equip", "enemy_broken", SubResource("AnimationNodeStateMachineTransition_uh4fw"), "enemy_attack", "enemy_empty", SubResource("AnimationNodeStateMachineTransition_1yftj"), "enemy_empty", "enemy_broken", SubResource("AnimationNodeStateMachineTransition_pbrf8"), "enemy_attack", "enemy_idle", SubResource("AnimationNodeStateMachineTransition_0toqd"), "terminate", "initialize", SubResource("AnimationNodeStateMachineTransition_7ih00"), "Start", "sleep", SubResource("AnimationNodeStateMachineTransition_pjol2")]
graph_offset = Vector2(-38.4437, -261)

[node name="DefaultGun" instance=ExtResource("1_18nrt")]
self_modulate = Color(0.196078, 0.196078, 0.196078, 1)
collision_layer = 0
EquipSe = "weapon_default_gun"
Approach = 32.0
MaxSpeed = 280.0
ReductionApproach = 32.0
AutoScrollSpeed = 90.0
Bullet = ExtResource("2_jnrqm")
NumOfBullets = 30
HasEnemyStatemachine = true

[node name="CollisionShape2D" parent="." index="0"]
position = Vector2(8, 0)
shape = SubResource("RectangleShape2D_h3gra")

[node name="Sprite2D" parent="." index="1"]
position = Vector2(8, 0)
texture = ExtResource("2_pmspy")
hframes = 2

[node name="AnimationPlayer" parent="." index="2"]
libraries = {
&"": SubResource("AnimationLibrary_4j6vm")
}

[node name="AnimationTree" parent="." index="3"]
tree_root = SubResource("AnimationNodeStateMachine_h7hrb")
parameters/conditions/empty = false
parameters/conditions/press = false
parameters/conditions/release = false

[node name="Marker2D" type="Marker2D" parent="Muzzle" index="0"]
position = Vector2(30, 0)
